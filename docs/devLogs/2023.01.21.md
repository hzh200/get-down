下载的视频如果够大，就有机会少一些数据，看了看代码逻辑，初步判定是返回的数据量不满足请求的 range，可能是网络的问题（丢包？），可能是谷歌服务器返回的数据少（不大可能），所以，在 handleEnd 里面判断，如果 range[0] 和 range[1] 差距太大，就把 range 像错误的时候一样保存起来。但后来我发现，这些未能下载的 range 即使能保存下来，也不能下载，暂停然后重启之后也不行，尝试了一下，也不是请求头的问题。我输出了请求头看了一下，是重定向的问题，也应该不是 preflight 的问题，之前成功下载的数据都是使用的这个 url，所以是在下载的过程中，服务器的资源位置变了，发生了重定向，有时似乎也是服务器返回的数据少，因为报了 range 不匹配的的问题，但最后还是下载完成了。由于之后还有解析出的地址超时的问题，可以直接考虑在下载中判断是否需要重新解析的逻辑，但在 Scheduler 中在下载开始的时候来做的话，还是会有在下载中出现重定向的问题。

YouTube 视频有音视频混合的 format，通常是 720p 及以下的规格，也有 vp9，av1 和 avc 的视频和 opus 和 mp4a 的音频以供合并，默认 1080p vp9 和 MEDIUM（最高）opus 合并。av1 合并后没有封面，vp9 和 avc 都有封面。

opus 的音频下载完成时显示的是 opus 编码，在合并之后变成了 aac 编码。